(this.webpackJsonpmern=this.webpackJsonpmern||[]).push([[0],{112:function(e,t,a){"use strict";a.r(t);var n,s=a(0),r=a.n(s),i=a(47),o=a.n(i),c=(a(61),a(54)),l=a(48),u=a(49),m=a(55),d=a(53),f=(a(62),a(6)),g=a.n(f),h=a(50),p=a.n(h),v=function(){return g.a.get("/api/ip")},w=function(e){n=p()()},y=function(e){return g.a.get("/api/categories",{params:{gameid:e}})},E=function(){return g.a.get("/api/games")},N=function(e){return g.a.post("/api/create-game",{name:e})},b=function(e){return g.a.post("/api/create-player",{name:e})},S=function(e){n.emit("unsubscribeFromGame",e)},z=function(e,t,a){return n.emit("subscribeToGame",e),n.on("questionID",(function(e){return a.handleQuestion(e)})),n.on("contestantUpdate",(function(e){return a.handleNewContestant(e)})),n.on("scoresUpdate",(function(e,t,n,s){return a.handleNewScores(e,t,n,s)})),n.on("scoresInit",(function(e){return a.handleScoresInit(e)})),n.on("answerUpdate",(function(e){return a.handleAnswerUpdate(e)})),n.on("gameCloseQuestion",(function(){a.closeQuestion()})),n.on("buzzUpdate",(function(e){a.handleBuzzUpdate(e)})),n.on("timesUp",(function(e,t){a.timesUp(e,t)})),n.on("questionOver",(function(e){a.questionOver(e)})),n.on("initFinalQuestion",(function(){return a.initFinalQuestion()})),n.on("gameOver",(function(){return a.gameOver()})),n.on("finalGuess",(function(e,t){return a.finalGuess(e,t)})),g.a.post("/api/add-to-game",{game:e,player:t})},I=function(e,t){n.emit("updateRound",e,t)},Q=function(e,t){n.emit("selectQuestion",e,t)},C=function(e,t,a,s,r,i){n.emit("newScores",e,t,a,s,r,i)},q=function(e,t,a){n.emit("buzz",e,t,a)},T=function(e,t,a){n.emit("finalWager",e,t,a)},k=function(e,t,a){n.emit("submitFinal",e,t,a)},D=a(12),A=a.n(D),G=function(e){var t=e.categories;return r.a.createElement("div",{className:"jeopardy-table"},t.map((function(t,a){return r.a.createElement("div",{className:"category-column",key:a},a===e.activeCategory?r.a.createElement("div",{className:"cat-name cat-name-active "},t.name):r.a.createElement("div",{className:"cat-name "},t.name),t.questions.map((function(t,a){return e.answered.includes(t._id)?r.a.createElement("div",{id:t._id,key:a,className:"question-name"}):r.a.createElement("div",{key:a},r.a.createElement("div",{id:t._id,className:"question-name",onClick:function(){e.displayQuestion(t._id)}},t.value),r.a.createElement(A.a,{className:t._id,text:t.question}))})))})))},W=function(e){return r.a.createElement("div",{className:"contestants-table"},e.contestants.map((function(t,a){return r.a.createElement("div",{className:e.turn==a+1?"contestant-item contestant-active":"contestant",key:a},r.a.createElement("div",{className:"player-name"},t.name),r.a.createElement("div",{className:"player-score"},e.scores[t._id]))})),r.a.createElement("a",{onClick:function(t){e.backToMenu(t)},className:"backToMenu"},"Back to Menu"))},F=r.a.forwardRef((function(e,t){return r.a.createElement("div",{className:"active-question"},r.a.createElement("div",{className:"question-text"},e.question.question),e.canbuzz?r.a.createElement("button",{ref:t,onFocus:function(){return console.log("focus")},onClick:function(){return e.buzz()},id:"buzzer"},"BUZZ IN!"):"")})),O=r.a.forwardRef((function(e,t){return r.a.createElement("div",{className:"active-answer-panel"},e.buzzedIn==e.me?r.a.createElement("form",{id:"answer-field",onSubmit:function(t){e.answerQuestion(t)}},r.a.createElement("input",{ref:t,onFocus:function(){return console.log("focus")},onChange:function(t){return e.handleAnswer(t)},className:"answer",type:"text",name:"answer"}),r.a.createElement("input",{type:"submit"})):r.a.createElement("div",{className:"waiting"},e.buzzedIn," is currently answering"),r.a.createElement("div",{style:{width:80-80/6*(6-e.seconds)+"%"},className:"answerTimer"}))})),R=function(e){return r.a.createElement("div",{className:"answer-result-panel"},r.a.createElement("div",{className:"result-panel-inner"},e.questionOver?r.a.createElement("div",{className:"question-over"},"The answer was ",e.question.answer,"."):e.correct?r.a.createElement("div",{className:"correct-answer"},"The answer was ",e.question.answer,".",e.buzz," gains ",e.question.value,". The board is ",e.buzz,"'s"):""==e.guess?r.a.createElement("div",{className:"times-up"},"Times Up! Board is still open."):r.a.createElement("div",{className:"incorrect-answer"},e.buzz," guessed ",e.guess," and loses ",e.question.value,".")))},_=function(e){return r.a.createElement("div",{className:"final-jeopardy"},e.myscore>0?r.a.createElement("div",{className:"made-it"},r.a.createElement("h2",null,"Welcome to Final Jeopardy"),e.ready?r.a.createElement("div",{className:"question-stage"},r.a.createElement("h4",null,"Wager: $",e.wager),r.a.createElement("h3",null,e.question.questions[0].question),e.answered?r.a.createElement("div",{className:"final-guess"},e.guess):r.a.createElement("form",{id:"final-answer",onSubmit:function(t){e.finalAnswer(t)}},r.a.createElement("input",{onChange:function(t){return e.handleAnswer(t)},className:"final-answer",type:"text",name:"final-answer"}),r.a.createElement("input",{type:"submit"}))):r.a.createElement("div",{className:"wager-stage"},r.a.createElement("h2",null,"Welcome to Final Jeopardy"),r.a.createElement("h3",null,"The category is ",r.a.createElement("span",{className:"final-cat"},e.question.name)),r.a.createElement("h3",null,"Place your wager"),e.wagerSubmitted?"":r.a.createElement("form",{id:"wager",onSubmit:function(t){e.placeWager(t)}},r.a.createElement("input",{min:"0",max:e.myscore,onChange:function(t){return e.handleWager(t)},className:"wager",type:"number",name:"wager"}),r.a.createElement("input",{type:"submit"})))):r.a.createElement("div",{className:"didnt-make-it"},r.a.createElement("h2",null,"Sorry, you need money to participate in Final Jeopardy")))},j=function(e){return r.a.createElement("div",{className:"game-over"},e.contestants.map((function(t,a){return r.a.createElement("div",{className:"final-results",key:a},r.a.createElement("div",{className:"final-answer"},"Final Answer: ",e.finalAnswer),0===Object.keys(e.finalGuesses).length?r.a.createElement("div",{className:"past-game-readout"},r.a.createElement("span",{className:"player-name"}," ",t.name)," finished with ",e.finalScores[t._id]):r.a.createElement("div",{className:"readout"},r.a.createElement("span",{className:"player-name"}," ",t.name)," guessed ",e.finalGuesses[t.name]," and wagered $",Math.abs(e.scores[t._id]-e.finalScores[t._id]),". For a final score of $",e.finalScores[t._id]))})))},U=r.a.forwardRef((function(e,t){return r.a.createElement("div",{className:"turn-warning"},e.turn," has control of the board.",r.a.createElement("div",{className:"close-warning",onClick:function(){return e.close()}}))})),M=function(e){return r.a.createElement("div",{className:"menu-frame"},r.a.createElement("h3",null,"Start a New Game"),r.a.createElement("form",{onSubmit:function(t){e.createNewGame(t)}},r.a.createElement("input",{onChange:function(t){return e.handleGameTitle(t)},className:"gameTitle",type:"text",name:"gameTitle"}),r.a.createElement("input",{type:"submit"})),r.a.createElement("h3",null,"Active Games"),r.a.createElement("ul",null,e.games.map((function(t,a){return r.a.createElement("li",{className:"active-game",key:a},r.a.createElement("a",{onClick:function(a){e.startGame(t._id,t.title)}},t.title))}))))},B=function(e){return r.a.createElement("div",{className:"welcome-frame"},r.a.createElement("h1",null,"Welcome to Jeopardy!"),r.a.createElement("h2",null,"Enter your player name"),r.a.createElement("form",{onSubmit:function(t){e.createNewPlayer(t)}},r.a.createElement("input",{onChange:function(t){return e.handlePlayerName(t)},className:"playernName",type:"text",name:"playernName"}),r.a.createElement("input",{type:"submit"})))},L=a(52),x=a(51),J=a.n(x)()((function(e){var t=e.transcript,a=e.resetTranscript,n=e.browserSupportsSpeechRecognition,s=e.categories,i=e.pickCategory,o=e.activeCategory,c=e.displayQuestion;if(!n)return null;if(""!=t){var l=/[a-z]+/gi;console.log(t);var u=t.toLowerCase().match(l);null!=u&&(u=u.join("")),console.log(u),console.log(o);for(var m=0;m<s.length;m++){var d=s[m].name.toLowerCase().match(l);u==(d=d.join(""))&&(i(m),a())}if(o>-1)for(m=0;m<s[o].questions.length;m++)t==s[o].questions[m].value.replace("$","")&&(a(),c(s[o].questions[m]._id))}return r.a.createElement("div",null,r.a.createElement("button",{id:"resetSpeech",onClick:a},"Reset"),r.a.createElement("span",null,t))})),P=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={categories:[],activeQuestion:"",activeAnswer:!1,activeResult:!1,timer:"",userScore:0,mainScreen:!0,activeCategory:-1,newGameTitle:"",game:"",games:[],answered:[],gameID:"",round:0,timestamp:"No Timestamp yet",playerID:"",playerName:"",playerNum:0,contestants:[],scores:[],turn:1,buzzedIn:"",canbuzz:!0,correct:!1,resultTimer:"",questionOver:!1,triedToAnswer:0,totalQuestionsInRound:0,finalWager:0,finalWagerSubmitted:!1,finalQuestion:!1,finalQuestionAnswered:!1,finalResults:!1,finalGuesses:{},gameOver:!1,activeAnswerTimer:"",guess:"",resetSpeechTimer:setInterval((function(){e.resetSpeechRecog()}),5e3),turnWarning:!1},e.getGames=function(){E().then((function(t){return e.setState({games:t.data})})).catch((function(e){return console.log(e)}))},e.getGame=function(t){y(t).then((function(t){var a=t.data.jeopardyCategories,n=!1;if(2==t.data.round&&(a=t.data.doubleCategories),4==t.data.round&&(n=!0),3==t.data.round){var s=Object(c.a)({},e.state.scores);e.setState({preFinalScores:s})}e.setState({categories:a,doubleCategories:t.data.doubleCategories,finalJeopardy:t.data.finalJeopardy,games:[],answered:t.data.answered,round:t.data.round,gameOver:n});for(var r=0,i=0;i<a.length;i++)r+=a[i].questions.length;e.setState({totalQuestionsInRound:r}),t.data.answered.length==r&&e.startNextRound()})).catch((function(e){return console.log(e)}))},e.handleNewContestant=function(t){e.setState({contestants:t});for(var a=0;a<t.length;a++)e.state.playerID==t[a]._id&&(e.state.playerNum=a+1)},e.handleScoresInit=function(t){e.setState({scores:t,preFinalScores:t})},e.handleNewScores=function(t,a,n,s){3!=e.state.round?(0!=a&&void 0!=a&&e.setState({turn:a}),s?e.setState({scores:t,guess:n,correct:s,activeResult:!0,resultTimer:setTimeout((function(){e.closeQuestionFinal()}),1500)}):e.setState({scores:t,guess:n,correct:s,activeResult:!0,triedToAnswer:e.state.triedToAnswer+1,resultTimer:setTimeout((function(){e.closeQuestion()}),1500)})):e.setState({scores:t})},e.questionOver=function(t){e.state.activeQuestion._id==t&&e.setState({activeResult:!0,triedToAnswer:0,questionOver:!0,resultTimer:setTimeout((function(){e.closeQuestionFinal()}),1500)})},e.closeQuestionFinal=function(){e.setState({timer:"",activeQuestion:"",guess:"",activeAnswer:!1,activeResult:!1,questionOver:!1}),e.state.totalQuestionsInRound==e.state.answered.length&&e.startNextRound()},e.startNextRound=function(){if(2==e.state.round&&(e.setState({preFinalScores:e.state.scores,round:3,answered:[],categories:e.state.doubleCategories}),I(e.state.gameID,3)),1==e.state.round){e.setState({round:2,answered:[],categories:e.state.doubleCategories}),I(e.state.gameID,2);for(var t=0,a=0;a<e.state.categories.length;a++)t+=e.state.categories[a].questions.length;e.setState({totalQuestionsInRound:t})}},e.handleAnswerUpdate=function(t){e.setState({answered:t})},e.closeQuestion=function(){e.setState({timer:"",guess:"",activeAnswer:!1,activeResult:!1}),e.state.triedToAnswer==e.state.contestants.length&&e.questionOver(e.state.activeQuestion._id)},e.displayQuestion=function(t){e.state.turn==e.state.playerNum?Q(t,e.state.gameID):e.setState({turnWarning:!0})},e.pickCategory=function(t){console.log(t),e.setState({activeCategory:t})},e.buzzIn=function(){q(e.state.gameID,e.state.playerName,e.state.activeQuestion._id)},e.handleBuzzUpdate=function(t){e.setState({activeAnswer:!0,buzzedIn:t,answerSeconds:6,activeAnswerTimer:setInterval((function(){e.setState({answerSeconds:e.state.answerSeconds-1})}),1e3)}),e.answerField.current.focus()},e.answerFinalQuestion=function(t){t.preventDefault();var a=e.state.finalJeopardy.questions[0].answer;e.setState({finalQuestionAnswered:!0}),""!=e.state.guess&&(e.state.guess.toLowerCase()==a.toLowerCase()?(console.log("Correct"),e.state.scores[e.state.playerID]=e.state.scores[e.state.playerID]+parseInt(e.state.finalWager)):e.state.scores[e.state.playerID]=e.state.scores[e.state.playerID]-parseInt(e.state.finalWager)),k(e.state.gameID,e.state.playerName,e.state.guess),C(e.state.gameID,e.state.scores,e.state.playerNum,e.state.guess,!1,e.state.round)},e.answerQuestion=function(t){if(t.preventDefault(),""!=e.state.guess){var a=[];clearInterval(e.state.activeAnswerTimer);var n,s=e.state.activeQuestion.value.replace("$",""),r=!1,i=e.state.guess,o=e.state.activeQuestion.answer.toLowerCase(),c=/[a-z]+/gi;"the"!=(o=o.match(c))[0].toLowerCase()&&"a"!=o[0].toLowerCase()||(a.push(o.join("").toLowerCase()),o.splice(0,1)),o=o.join("").toLowerCase(),a.push(o),""!=i&&(i=(i=i.match(c)).join("").toLowerCase()),a.includes(i)?(console.log("Correct"),e.state.scores[e.state.playerID]=e.state.scores[e.state.playerID]+parseInt(s),r=!0,n=!0):(e.setState({canbuzz:!1}),console.log(o),n=!1,e.state.scores[e.state.playerID]=e.state.scores[e.state.playerID]-parseInt(s)),C(e.state.gameID,e.state.scores,r?e.state.playerNum:0,e.state.guess,n,e.state.round)}},e.handleAnswer=function(t){e.setState({guess:t.target.value})},e.handleGameTitle=function(t){e.setState({newGameTitle:t.target.value})},e.handlePlayerName=function(t){e.setState({newPlayerName:t.target.value})},e.createNewGame=function(t){t.preventDefault(),N(e.state.newGameTitle).then((function(t){e.startGame(t.data._id,t.data.title)})).catch((function(e){return console.log(e)}))},e.createNewPlayer=function(t){t.preventDefault(),b(e.state.newPlayerName).then((function(t){var a=new L.a;a.set("playerID",t.data._id),a.set("playerName",t.data.name),e.setState({playerID:t.data._id}),e.setState({playerName:t.data.name})})).catch((function(e){return console.log(e)}))},e.timesUp=function(t,a){if(clearInterval(e.state.activeAnswerTimer),!e.state.activeResult&&t==e.state.playerName&&e.state.playerName==e.state.buzzedIn&&e.state.activeAnswer&&e.state.activeQuestion._id==a){e.setState({canbuzz:!1});var n=e.state.activeQuestion.value.replace("$","");e.state.scores[e.state.playerID]=e.state.scores[e.state.playerID]-parseInt(n),C(e.state.gameID,e.state.scores,0,"",!1,e.state.round)}},e.finalGuess=function(t,a){e.state.finalGuesses[t]=a,console.log(e.state.finalGuesses)},e.gameOver=function(){console.log("game Over"),e.setState({gameOver:!0})},e.backToMain=function(t){t.preventDefault(),e.setState({mainScreen:!0}),S(e.state.gameID),e.setState({gameID:"",game:"",turnWarning:!1}),e.getGames()},e.startGame=function(t,a){e.setState({gameID:t,game:a}),e.setState({mainScreen:!1});var n={handleQuestion:e.handleQuestion,handleNewContestant:e.handleNewContestant,handleNewScores:e.handleNewScores,handleBuzzUpdate:e.handleBuzzUpdate,handleScoresInit:e.handleScoresInit,handleAnswerUpdate:e.handleAnswerUpdate,closeQuestion:e.closeQuestion,timesUp:e.timesUp,questionOver:e.questionOver,initFinalQuestion:e.initFinalQuestion,finalGuess:e.finalGuess,gameOver:e.gameOver};z(t,e.state.playerID,n).then((function(){e.getGame(e.state.gameID),console.log(e.state.contestants)}))},e.initFinalQuestion=function(){console.log("final question ready"),e.setState({finalQuestion:!0})},e.handleQuestion=function(t){var a=e.state.categories.filter((function(e,a){return e.questions.some((function(e){return e._id==t}))}))[0].questions.filter((function(e){return e._id==t}));e.setState({activeQuestion:a[0],canbuzz:!0});var n=["click"];!function(e){n.forEach((function(t){return e.dispatchEvent(new MouseEvent(t,{view:window,bubbles:!0,cancelable:!0,buttons:1}))}))}(document.querySelector('.question-name[id="'+t+'"] + .rs-container button')),e.buzzButton.current.focus()},e.resetSpeechRecog=function(){if(""!=e.state.gameID&&e.state.round<3){var t=["click"];!function(e){t.forEach((function(t){return e.dispatchEvent(new MouseEvent(t,{view:window,bubbles:!0,cancelable:!0,buttons:1}))}))}(document.querySelector("#resetSpeech"))}},e.handleFinalWager=function(t){e.setState({finalWager:t.target.value})},e.placeFinalWager=function(t){t.preventDefault(),e.setState({finalWagerSubmitted:!0}),T(e.state.gameID,e.state.playerName,e.state.finalWager)},e.closeWarning=function(){e.setState({turnWarning:!1})},e}return Object(u.a)(a,[{key:"loadCookies",value:function(){var e=new L.a;this.setState({playerName:e.get("playerName")||"",playerID:e.get("playerID")||""})}},{key:"componentDidMount",value:function(){v().then((function(e){console.log(e),w(e.data)})),this.loadCookies(),this.getGames(),this.buzzButton=r.a.createRef(),this.answerField=r.a.createRef()}},{key:"render",value:function(){return r.a.createElement("div",{className:"jeopardy-game"},this.state.turnWarning?r.a.createElement(U,{close:this.closeWarning,turn:this.state.contestants[this.state.turn-1].name}):"",r.a.createElement("div",{className:"utility-menu"},""!=this.state.playerID?r.a.createElement("div",{className:"game-info"},r.a.createElement("h3",{className:"my-name"},this.state.playerName,""!=this.state.game?"  |  "+this.state.game:"")):""),this.state.activeResult?r.a.createElement(R,{questionOver:this.state.questionOver,buzz:this.state.buzzedIn,correct:this.state.correct,question:this.state.activeQuestion,guess:this.state.guess,me:this.state.playerName}):this.state.activeAnswer?r.a.createElement(O,{handleAnswer:this.handleAnswer,answerQuestion:this.answerQuestion,buzzedIn:this.state.buzzedIn,me:this.state.playerName,ref:this.answerField,seconds:this.state.answerSeconds}):"",this.state.activeQuestion?r.a.createElement(F,{question:this.state.activeQuestion,buzz:this.buzzIn,canbuzz:this.state.canbuzz,ref:this.buzzButton}):"",this.state.mainScreen?""==this.state.playerID?r.a.createElement("div",{className:"player-reg"},r.a.createElement(B,{handlePlayerName:this.handlePlayerName,createNewPlayer:this.createNewPlayer})):r.a.createElement("div",{className:"main-menu"},r.a.createElement(M,{startGame:this.startGame,createNewGame:this.createNewGame,handleGameTitle:this.handleGameTitle,games:this.state.games})):this.state.round>=3?this.state.gameOver?r.a.createElement("div",null,r.a.createElement(j,{finalGuesses:this.state.finalGuesses,scores:this.state.preFinalScores,finalScores:this.state.scores,contestants:this.state.contestants,finalAnswer:this.state.finalJeopardy.questions[0].answer}),r.a.createElement(W,{scores:this.state.scores,contestants:this.state.contestants,turn:"9",backToMenu:this.backToMain})):r.a.createElement("div",{className:"jeopardy-board"},r.a.createElement(W,{scores:this.state.scores,contestants:this.state.contestants,turn:"9",backToMenu:this.backToMain}),r.a.createElement(_,{wagerSubmitted:this.state.finalWagerSubmitted,wager:this.state.finalWager,handleWager:this.handleFinalWager,placeWager:this.placeFinalWager,ready:this.state.finalQuestion,myscore:this.state.preFinalScores[this.state.playerID],question:this.state.finalJeopardy,handleAnswer:this.handleAnswer,finalAnswer:this.answerFinalQuestion,scores:this.state.preFinalScores,finalScores:this.state.scores,contestants:this.state.contestants,turn:this.state.turn,answered:this.state.finalQuestionAnswered,guess:this.state.guess})):r.a.createElement("div",{className:"jeopardy-board"},r.a.createElement("div",{className:"just-the-board"},r.a.createElement(G,{endRound:this.state.totalQuestionsInRound,answered:this.state.answered,activeCategory:this.state.activeCategory,displayQuestion:this.displayQuestion,categories:this.state.categories,doubleCat:this.state.doubleCategories,round:this.state.round})),r.a.createElement(W,{scores:this.state.scores,contestants:this.state.contestants,turn:this.state.turn,backToMenu:this.backToMain}),r.a.createElement(J,{displayQuestion:this.displayQuestion,activeCategory:this.state.activeCategory,categories:this.state.categories,pickCategory:this.pickCategory})))}}]),a}(s.Component),$=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Z(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var H=a(113);o.a.render(r.a.createElement(H.a,null,r.a.createElement(P,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");$?function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Z(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):Z(e)}))}}()},61:function(e,t,a){},62:function(e,t,a){}},[[112,1,2]]]);
//# sourceMappingURL=main.27f71828.chunk.js.map